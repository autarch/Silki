<%init>
return $m->call_next();
</%init>

<%method local_nav>
  <ul>
    <li>
      <a href="<% $uri %>"><% $link %></a>
    </li>
  </ul>

<%init>
return unless $c->user()->can_edit_user($user);

my $link
    = $c->user()->user_id() == $user->user_id()
    ? loc('Your preferences')
    : loc( 'Preferences for %1', $user->best_name() );

my $uri
    = $wiki
    ? $wiki->uri_for_member( $user, 'preferences_form' )
    : $user->uri( view => 'preferences_form' );
</%init>

<%args>
$user
$wiki => undef
</%args>
</%method>
